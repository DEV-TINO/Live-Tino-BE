<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>WebSocket í…ŒìŠ¤íŠ¸</title>
</head>
<body>
<h2>WebSocket í…ŒìŠ¤íŠ¸</h2>
<button onclick="connectWebSocket()">ì›¹ì†Œì¼“ ì—°ê²°</button>
<button onclick="sendTestMessage()">ë©”ì‹œì§€ ì „ì†¡</button>
<p id="status">ì—°ê²° ìƒíƒœ: âŒ</p>

<script>
    let ws;

    function connectWebSocket() {
        ws = new WebSocket("ws://localhost:8080/ws/videoStream?broadcastId=98c58875-6788-4b4e-8178-c3524370aad9");

        ws.onopen = function () {
            console.log("âœ… WebSocket ì—°ê²°ë¨");
            document.getElementById("status").innerText = "ì—°ê²° ìƒíƒœ: âœ…";
        };

        ws.onmessage = function (event) {
            console.log("ğŸ“© ë©”ì‹œì§€ ìˆ˜ì‹ :", event.data);
        };

        ws.onerror = function (error) {
            console.error("âŒ WebSocket ì˜¤ë¥˜:", error);
        };

        ws.onclose = function () {
            console.log("ğŸ”´ WebSocket ì—°ê²° ì¢…ë£Œ");
            document.getElementById("status").innerText = "ì—°ê²° ìƒíƒœ: âŒ";
        };
    }

    function sendTestMessage() {
        if (ws && ws.readyState === WebSocket.OPEN) {
            ws.send("Hello, WebSocket!");
            console.log("ğŸ“¤ ë©”ì‹œì§€ ì „ì†¡: Hello, WebSocket!");
        } else {
            console.error("â›” WebSocket ì—°ê²° ì•ˆë¨");
        }
    }
</script>
</body>
</html>
